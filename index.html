<!doctype html>
<html>
<head>

<script>
var mouseX, mouseY;
var pmx, pmy;
var screenWidth = 500, screenHeight = 500;
var screenX, screenY;

function getMouseCoordinates(event){
	mouseX = event.clientX;
	mouseY = event.clientY;

	//Incredible find here. 
	if((mouseX-pmx) > 0){
		screenX += 1;
	}else if((mouseX-pmx) < 0){
		screenX -= 1;
	}
	pmx = mouseX;

	if((mouseY-pmy) > 0){
		screenY += 1;
	}else if((mouseY-pmy) < 0){
		screenY -= 1;
	}
	pmy = mouseY;

	if(mouseX < 10){
		screenX = 0;
	}
	if(mouseX > screenWidth){
		screenX = 500;
	}
	if(mouseY < 10){
		screenY = 0;
	}
	if(mouseY > screenHeight || screenY > screenHeight){
		screenY = 500;
	}

	document.getElementById("p1").innerHTML = "MouseX: " + mouseX + " | MouseY: " + mouseY;
	document.getElementById("p2").innerHTML = "ScreenX: " + screenX + " | ScreenY: " + screenY;
	document.getElementById("p3").innerHTML = (screenWidth-mouseX) + " | " + (mouseX-screenWidth);
}


var mx, my;

const ssquareArray = [];
const colorA = ["red","purple"];

//gets the x and y coordinates of the mouse on the canvas
function getMCoordinates(event){
	mx = event.clientX;
	my = event.clientY;

	document.getElementById("p1").innerHTML = "MouseX: " + mx + " | MouseY: " + my;
}

//draws a single square 
function drawSingleSquare(){
	var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d");

	ssquareArray.push([mx, my, 10, 10, mx + 10, my + 10, colorA[0]]);

	ctx.beginPath();
	ctx.strokeStyle = ssquareArray[0][6];
	ctx.rect(ssquareArray[0][0],ssquareArray[0][1],ssquareArray[0][2]*-1,ssquareArray[0][3]*-1);
	ctx.stroke();

}

var mitvl;
var endx, endy;

function startminterval(){
	mitvl = setInterval(moveSingleSquare, 24);
}

function endminterval(){
	clearInterval(mitvl);
}

var testbool = 0;
//updates the x and y of the square with mouse coordinates and updates the "hit box"
function updateSingleSquareCoordinates(){
	ssquareArray[0][0] = mx;
	ssquareArray[0][1] = my;

	ssquareArray[0][4] = mx + 10;
	ssquareArray[0][5] = my + 10;

	if(mx > ssquareArray[0][0] && mx < ssquareArray[0][4] && my > ssquareArray[0][1] && my < ssquareArray[0][5]){
		document.getElementById("p3").innerHTML = true;
		testbool = 1;
	}else{
		document.getElementById("p3").innerHTML = false;
		testbool = 0;
	}

	//document.getElementById("p2").innerHTML = ssquareArray[0][0] + " " + ssquareArray[0][1] + " " + ssquareArray[0][4] + " " + ssquareArray[0][5];
}

setInterval(checkMousePosition,100);
function checkMousePosition(){
	if(mx > ssquareArray[0][0] && mx < ssquareArray[0][4] && my > ssquareArray[0][1] && my < ssquareArray[0][5]){
		document.getElementById("p3").innerHTML = true;
	}else{
		document.getElementById("p3").innerHTML = false;
	}
}

//draws square after mouse mooves
function moveSingleSquare(){
	var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d");

	ctx.clearRect(0,0,canvas.width, canvas.height);

	updateSingleSquareCoordinates();

	ctx.beginPath();
	if(testbool == 1){
		ctx.strokeStyle = colorA[0][1];
	}else{
		ctx.strokeStyle = colorA[0][0];
	}
	ctx.font = '10px arial';
	ctx.fillText(ssquareArray[0][0], ssquareArray[0][0], ssquareArray[0][1]);
	ctx.rect(ssquareArray[0][0],ssquareArray[0][1],ssquareArray[0][2]*-1,ssquareArray[0][3]*-1);
	ctx.stroke();
}

</script>
</head>
<body onkeydown="drawSingleSquare();">
<canvas id="canvas" width="500" height="500" onmousemove="getMCoordinates(event)" onmousedown="startminterval()" onmouseup="endminterval()" ontouchmove="startminterval()" ontouchend="drawSingleSquare()"></canvas>

<p id="p1"></p>
<p id="p2"></p>
<p id="p3"></p>
<p id="p4"></p>
<p id="p5"></p>

</body>
</html>
